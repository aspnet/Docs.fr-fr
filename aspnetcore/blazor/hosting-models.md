---
title: BlazorModèles d’hébergement ASP.net Core
author: guardrex
description: Comprendre Blazor WebAssembly et Blazor Server héberger des modèles.
monikerRange: '>= aspnetcore-3.1'
ms.author: riande
ms.custom: mvc
ms.date: 12/07/2020
no-loc:
- appsettings.json
- ASP.NET Core Identity
- cookie
- Cookie
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: blazor/hosting-models
ms.openlocfilehash: adc3b7b1b33438f2d0024bf78830e412a330ad45
ms.sourcegitcommit: 04ad9cd26fcaa8bd11e261d3661f375f5f343cdc
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/10/2021
ms.locfileid: "100106854"
---
# <a name="aspnet-core-blazor-hosting-models"></a><span data-ttu-id="7a386-103">BlazorModèles d’hébergement ASP.net Core</span><span class="sxs-lookup"><span data-stu-id="7a386-103">ASP.NET Core Blazor hosting models</span></span>

<span data-ttu-id="7a386-104">Par [Daniel Roth](https://github.com/danroth27)</span><span class="sxs-lookup"><span data-stu-id="7a386-104">By [Daniel Roth](https://github.com/danroth27)</span></span>

<span data-ttu-id="7a386-105">Blazor est un Framework Web conçu pour s’exécuter côté client dans le navigateur sur un Runtime .NET basé sur [Webassembly](https://webassembly.org/)( *Blazor WebAssembly* ) ou côté serveur dans ASP.net Core ( *Blazor Server* ).</span><span class="sxs-lookup"><span data-stu-id="7a386-105">Blazor is a web framework designed to run client-side in the browser on a [WebAssembly](https://webassembly.org/)-based .NET runtime (*Blazor WebAssembly*) or server-side in ASP.NET Core (*Blazor Server*).</span></span> <span data-ttu-id="7a386-106">Quel que soit le modèle d’hébergement, les modèles d’application et de composant *sont les mêmes*.</span><span class="sxs-lookup"><span data-stu-id="7a386-106">Regardless of the hosting model, the app and component models *are the same*.</span></span>

## Blazor WebAssembly

<span data-ttu-id="7a386-107">Le Blazor modèle d’hébergement principal exécute côté client dans le navigateur sur Webassembly.</span><span class="sxs-lookup"><span data-stu-id="7a386-107">The primary Blazor hosting model is running client-side in the browser on WebAssembly.</span></span> <span data-ttu-id="7a386-108">L' Blazor application, ses dépendances et le Runtime .net sont téléchargés dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="7a386-108">The Blazor app, its dependencies, and the .NET runtime are downloaded to the browser.</span></span> <span data-ttu-id="7a386-109">L’application est exécutée directement sur le thread d’interface utilisateur du navigateur.</span><span class="sxs-lookup"><span data-stu-id="7a386-109">The app is executed directly on the browser UI thread.</span></span> <span data-ttu-id="7a386-110">Les mises à jour de l’interface utilisateur et la gestion des événements se produisent dans le même processus.</span><span class="sxs-lookup"><span data-stu-id="7a386-110">UI updates and event handling occur within the same process.</span></span> <span data-ttu-id="7a386-111">Les ressources de l’application sont déployées en tant que fichiers statiques sur un serveur Web ou un service qui prend en charge le contenu statique sur les clients.</span><span class="sxs-lookup"><span data-stu-id="7a386-111">The app's assets are deployed as static files to a web server or service capable of serving static content to clients.</span></span>

![::: No-Loc (éblouissant webassembly) :::::::: No-Loc (éblouissant) ::: app s’exécute sur un thread d’interface utilisateur dans le navigateur.](hosting-models/_static/blazor-webassembly.png)

<span data-ttu-id="7a386-113">Lorsque l' Blazor WebAssembly application est créée pour le déploiement sans ASP.net Core application principale pour servir ses fichiers, l’application est appelée application *autonome* Blazor WebAssembly .</span><span class="sxs-lookup"><span data-stu-id="7a386-113">When the Blazor WebAssembly app is created for deployment without a backend ASP.NET Core app to serve its files, the app is called a *standalone* Blazor WebAssembly app.</span></span> <span data-ttu-id="7a386-114">Lorsque l’application est créée pour le déploiement avec une application principale pour servir ses fichiers, l’application est appelée application *hébergée* Blazor WebAssembly .</span><span class="sxs-lookup"><span data-stu-id="7a386-114">When the app is created for deployment with a backend app to serve its files, the app is called a *hosted* Blazor WebAssembly app.</span></span> <span data-ttu-id="7a386-115">Une application hébergée Blazor WebAssembly interagit généralement avec le serveur sur le réseau à l’aide d’appels d’API Web ou [SignalR](xref:signalr/introduction) ( <xref:tutorials/signalr-blazor> ).</span><span class="sxs-lookup"><span data-stu-id="7a386-115">A hosted Blazor WebAssembly app typically interacts with the server over the network using web API calls or [SignalR](xref:signalr/introduction) (<xref:tutorials/signalr-blazor>).</span></span>

<span data-ttu-id="7a386-116">Le `blazor.webassembly.js` script est fourni par l’infrastructure et les handles :</span><span class="sxs-lookup"><span data-stu-id="7a386-116">The `blazor.webassembly.js` script is provided by the framework and handles:</span></span>

* <span data-ttu-id="7a386-117">Téléchargement du Runtime .NET, de l’application et des dépendances de l’application.</span><span class="sxs-lookup"><span data-stu-id="7a386-117">Downloading the .NET runtime, the app, and the app's dependencies.</span></span>
* <span data-ttu-id="7a386-118">Initialisation du runtime pour exécuter l’application.</span><span class="sxs-lookup"><span data-stu-id="7a386-118">Initialization of the runtime to run the app.</span></span>

<span data-ttu-id="7a386-119">Le Blazor WebAssembly modèle d’hébergement offre plusieurs avantages :</span><span class="sxs-lookup"><span data-stu-id="7a386-119">The Blazor WebAssembly hosting model offers several benefits:</span></span>

* <span data-ttu-id="7a386-120">Il n’existe aucune dépendance côté serveur .NET.</span><span class="sxs-lookup"><span data-stu-id="7a386-120">There's no .NET server-side dependency.</span></span> <span data-ttu-id="7a386-121">L’application fonctionne entièrement une fois qu’elle a été téléchargée sur le client.</span><span class="sxs-lookup"><span data-stu-id="7a386-121">The app is fully functioning after it's downloaded to the client.</span></span>
* <span data-ttu-id="7a386-122">Les ressources et les fonctionnalités du client sont pleinement exploitées.</span><span class="sxs-lookup"><span data-stu-id="7a386-122">Client resources and capabilities are fully leveraged.</span></span>
* <span data-ttu-id="7a386-123">Le travail est déchargé du serveur vers le client.</span><span class="sxs-lookup"><span data-stu-id="7a386-123">Work is offloaded from the server to the client.</span></span>
* <span data-ttu-id="7a386-124">Un serveur Web ASP.NET Core n’est pas requis pour héberger l’application.</span><span class="sxs-lookup"><span data-stu-id="7a386-124">An ASP.NET Core web server isn't required to host the app.</span></span> <span data-ttu-id="7a386-125">Les scénarios de déploiement sans serveur sont possibles, tels que la mise en service de l’application à partir d’un réseau de distribution de contenu (CDN).</span><span class="sxs-lookup"><span data-stu-id="7a386-125">Serverless deployment scenarios are possible, such as serving the app from a Content Delivery Network (CDN).</span></span>

<span data-ttu-id="7a386-126">Le Blazor WebAssembly modèle d’hébergement présente les limitations suivantes :</span><span class="sxs-lookup"><span data-stu-id="7a386-126">The Blazor WebAssembly hosting model has the following limitations:</span></span>

* <span data-ttu-id="7a386-127">L’application est limitée aux fonctionnalités du navigateur.</span><span class="sxs-lookup"><span data-stu-id="7a386-127">The app is restricted to the capabilities of the browser.</span></span>
* <span data-ttu-id="7a386-128">Le matériel et le logiciel client compatibles (par exemple, la prise en charge de webassembly) sont requis.</span><span class="sxs-lookup"><span data-stu-id="7a386-128">Capable client hardware and software (for example, WebAssembly support) is required.</span></span>
* <span data-ttu-id="7a386-129">La taille du téléchargement est supérieure, et les applications prennent plus de temps à se charger.</span><span class="sxs-lookup"><span data-stu-id="7a386-129">Download size is larger, and apps take longer to load.</span></span>
* <span data-ttu-id="7a386-130">Le Runtime .NET et la prise en charge des outils sont moins matures.</span><span class="sxs-lookup"><span data-stu-id="7a386-130">.NET runtime and tooling support is less mature.</span></span> <span data-ttu-id="7a386-131">Par exemple, des limitations existent dans la prise en charge de [.NET standard](/dotnet/standard/net-standard) et le débogage.</span><span class="sxs-lookup"><span data-stu-id="7a386-131">For example, limitations exist in [.NET Standard](/dotnet/standard/net-standard) support and debugging.</span></span>

<span data-ttu-id="7a386-132">Pour créer une Blazor WebAssembly application, consultez <xref:blazor/tooling> .</span><span class="sxs-lookup"><span data-stu-id="7a386-132">To create a Blazor WebAssembly app, see <xref:blazor/tooling>.</span></span>

<span data-ttu-id="7a386-133">Le modèle d’application hébergée Blazor prend en charge les [conteneurs dockers](/dotnet/standard/microservices-architecture/container-docker-introduction/index).</span><span class="sxs-lookup"><span data-stu-id="7a386-133">The hosted Blazor app model supports [Docker containers](/dotnet/standard/microservices-architecture/container-docker-introduction/index).</span></span> <span data-ttu-id="7a386-134">Pour la prise en charge de l’ancrage dans Visual Studio, cliquez avec le bouton droit sur le `Server` projet d’une solution hébergée, Blazor WebAssembly puis sélectionnez **Ajouter** la  >  **prise en charge** de l’ancrage.</span><span class="sxs-lookup"><span data-stu-id="7a386-134">For Docker support in Visual Studio, right-click on the `Server` project of a hosted Blazor WebAssembly solution and select **Add** > **Docker Support**.</span></span>

## Blazor Server

<span data-ttu-id="7a386-135">Avec le Blazor Server modèle d’hébergement, l’application est exécutée sur le serveur à partir d’une application ASP.net core.</span><span class="sxs-lookup"><span data-stu-id="7a386-135">With the Blazor Server hosting model, the app is executed on the server from within an ASP.NET Core app.</span></span> <span data-ttu-id="7a386-136">Les mises à jour de l’interface utilisateur, la gestion des événements et les appels JavaScript sont gérés sur une [SignalR](xref:signalr/introduction) connexion.</span><span class="sxs-lookup"><span data-stu-id="7a386-136">UI updates, event handling, and JavaScript calls are handled over a [SignalR](xref:signalr/introduction) connection.</span></span>

![Le navigateur interagit avec l’application (hébergée à l’intérieur d’une application ASP.NET Core) sur le serveur via un ::: No-Loc (Signalr) ::: Connection.](hosting-models/_static/blazor-server.png)

<span data-ttu-id="7a386-138">L’application ASP.NET Core fait référence à la classe de l’application `Startup` à ajouter :</span><span class="sxs-lookup"><span data-stu-id="7a386-138">The ASP.NET Core app references the app's `Startup` class to add:</span></span>

* <span data-ttu-id="7a386-139">Services côté serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-139">Server-side services.</span></span>
* <span data-ttu-id="7a386-140">L’application vers le pipeline de traitement des demandes.</span><span class="sxs-lookup"><span data-stu-id="7a386-140">The app to the request handling pipeline.</span></span>

<span data-ttu-id="7a386-141">Sur le client, le `blazor.server.js` script établit la SignalR connexion avec le serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-141">On the client, the `blazor.server.js` script establishes the SignalR connection with the server.</span></span> <span data-ttu-id="7a386-142">Le script est fourni à l’application côté client à partir d’une ressource incorporée dans le ASP.NET Core Framework partagé.</span><span class="sxs-lookup"><span data-stu-id="7a386-142">The script is served to the client-side app from an embedded resource in the ASP.NET Core shared framework.</span></span> <span data-ttu-id="7a386-143">L’application côté client est responsable de la persistance et de la restauration de l’état de l’application en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="7a386-143">The client-side app is responsible for persisting and restoring app state as required.</span></span> 

<span data-ttu-id="7a386-144">Le Blazor Server modèle d’hébergement offre plusieurs avantages :</span><span class="sxs-lookup"><span data-stu-id="7a386-144">The Blazor Server hosting model offers several benefits:</span></span>

* <span data-ttu-id="7a386-145">La taille du téléchargement est beaucoup plus petite qu’une Blazor WebAssembly application, et l’application est chargée beaucoup plus rapidement.</span><span class="sxs-lookup"><span data-stu-id="7a386-145">Download size is significantly smaller than a Blazor WebAssembly app, and the app loads much faster.</span></span>
* <span data-ttu-id="7a386-146">L’application tire pleinement parti des fonctionnalités du serveur, notamment de l’utilisation de toutes les API compatibles avec .NET Core.</span><span class="sxs-lookup"><span data-stu-id="7a386-146">The app takes full advantage of server capabilities, including use of any .NET Core compatible APIs.</span></span>
* <span data-ttu-id="7a386-147">.NET Core sur le serveur est utilisé pour exécuter l’application, de sorte que les outils .NET existants, tels que le débogage, fonctionnent comme prévu.</span><span class="sxs-lookup"><span data-stu-id="7a386-147">.NET Core on the server is used to run the app, so existing .NET tooling, such as debugging, works as expected.</span></span>
* <span data-ttu-id="7a386-148">Les clients légers sont pris en charge.</span><span class="sxs-lookup"><span data-stu-id="7a386-148">Thin clients are supported.</span></span> <span data-ttu-id="7a386-149">Par exemple, les Blazor Server applications fonctionnent avec des navigateurs qui ne prennent pas en charge Webassembly et sur des appareils à ressources restreintes.</span><span class="sxs-lookup"><span data-stu-id="7a386-149">For example, Blazor Server apps work with browsers that don't support WebAssembly and on resource-constrained devices.</span></span>
* <span data-ttu-id="7a386-150">La base de code .NET/C# de l’application, y compris le code du composant de l’application, n’est pas traitée aux clients.</span><span class="sxs-lookup"><span data-stu-id="7a386-150">The app's .NET/C# code base, including the app's component code, isn't served to clients.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7a386-151">Une Blazor Server application effectue un prérendu en réponse à la première demande du client, ce qui crée l’état de l’interface utilisateur sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-151">A Blazor Server app prerenders in response to the first client request, which creates the UI state on the server.</span></span> <span data-ttu-id="7a386-152">Lorsque le client tente de créer une SignalR connexion, **le client doit se reconnecter au même serveur**.</span><span class="sxs-lookup"><span data-stu-id="7a386-152">When the client attempts to create a SignalR connection, **the client must reconnect to the same server**.</span></span> <span data-ttu-id="7a386-153">Blazor Server les applications qui utilisent plusieurs serveurs principaux doivent implémenter des *sessions rémanentes* pour les SignalR connexions.</span><span class="sxs-lookup"><span data-stu-id="7a386-153">Blazor Server apps that use more than one backend server should implement *sticky sessions* for SignalR connections.</span></span> <span data-ttu-id="7a386-154">Pour plus d’informations, consultez la section [connexion au serveur](#connection-to-the-server) .</span><span class="sxs-lookup"><span data-stu-id="7a386-154">For more information, see the [Connection to the server](#connection-to-the-server) section.</span></span>

<span data-ttu-id="7a386-155">Le Blazor Server modèle d’hébergement présente les limitations suivantes :</span><span class="sxs-lookup"><span data-stu-id="7a386-155">The Blazor Server hosting model has the following limitations:</span></span>

* <span data-ttu-id="7a386-156">Une latence plus élevée existe généralement.</span><span class="sxs-lookup"><span data-stu-id="7a386-156">Higher latency usually exists.</span></span> <span data-ttu-id="7a386-157">Chaque interaction utilisateur implique un tronçon réseau.</span><span class="sxs-lookup"><span data-stu-id="7a386-157">Every user interaction involves a network hop.</span></span>
* <span data-ttu-id="7a386-158">Il n’existe aucune prise en charge hors connexion.</span><span class="sxs-lookup"><span data-stu-id="7a386-158">There's no offline support.</span></span> <span data-ttu-id="7a386-159">Si la connexion cliente échoue, l’application cesse de fonctionner.</span><span class="sxs-lookup"><span data-stu-id="7a386-159">If the client connection fails, the app stops working.</span></span>
* <span data-ttu-id="7a386-160">L’évolutivité est difficile pour les applications avec de nombreux utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="7a386-160">Scalability is challenging for apps with many users.</span></span> <span data-ttu-id="7a386-161">Le serveur doit gérer plusieurs connexions clientes et gérer l’état du client.</span><span class="sxs-lookup"><span data-stu-id="7a386-161">The server must manage multiple client connections and handle client state.</span></span>
* <span data-ttu-id="7a386-162">Un serveur de ASP.NET Core est requis pour servir l’application.</span><span class="sxs-lookup"><span data-stu-id="7a386-162">An ASP.NET Core server is required to serve the app.</span></span> <span data-ttu-id="7a386-163">Les scénarios de déploiement sans serveur ne sont pas possibles, tels que la fourniture de l’application à partir d’un réseau de distribution de contenu (CDN).</span><span class="sxs-lookup"><span data-stu-id="7a386-163">Serverless deployment scenarios aren't possible, such as serving the app from a Content Delivery Network (CDN).</span></span>

<span data-ttu-id="7a386-164">Pour créer une Blazor Server application, consultez <xref:blazor/tooling> .</span><span class="sxs-lookup"><span data-stu-id="7a386-164">To create a Blazor Server app, see <xref:blazor/tooling>.</span></span>

<span data-ttu-id="7a386-165">Le Blazor Server modèle d’application prend en charge les conteneurs de l' [ancrage](/dotnet/standard/microservices-architecture/container-docker-introduction/index).</span><span class="sxs-lookup"><span data-stu-id="7a386-165">The Blazor Server app model supports [Docker containers](/dotnet/standard/microservices-architecture/container-docker-introduction/index).</span></span> <span data-ttu-id="7a386-166">Pour la prise en charge de l’ancrage dans Visual Studio, cliquez avec le bouton droit sur le projet dans Visual Studio, puis sélectionnez **Ajouter** la  >  **prise en charge** de l’ancrage.</span><span class="sxs-lookup"><span data-stu-id="7a386-166">For Docker support in Visual Studio, right-click on the project in Visual Studio and select **Add** > **Docker Support**.</span></span>

### <a name="comparison-to-server-rendered-ui"></a><span data-ttu-id="7a386-167">Comparaison avec l’interface utilisateur du rendu serveur</span><span class="sxs-lookup"><span data-stu-id="7a386-167">Comparison to server-rendered UI</span></span>

<span data-ttu-id="7a386-168">L’une des façons de comprendre Blazor Server les applications consiste à comprendre comment elle diffère des modèles traditionnels pour le rendu de l’interface utilisateur dans les applications de ASP.net core à l’aide de Razor vues ou de Razor pages.</span><span class="sxs-lookup"><span data-stu-id="7a386-168">One way to understand Blazor Server apps is to understand how it differs from traditional models for rendering UI in ASP.NET Core apps using Razor views or Razor Pages.</span></span> <span data-ttu-id="7a386-169">Les deux modèles utilisent le [ Razor langage](xref:mvc/views/razor) pour décrire le contenu HTML pour *le* rendu, mais ils diffèrent de manière significative dans le rendu du balisage.</span><span class="sxs-lookup"><span data-stu-id="7a386-169">Both models use the [Razor language](xref:mvc/views/razor) to describe HTML content for rendering, but they significantly differ in *how* markup is rendered.</span></span>

<span data-ttu-id="7a386-170">Quand une Razor page ou une vue est restituée, chaque ligne de Razor code émet du code HTML sous forme de texte.</span><span class="sxs-lookup"><span data-stu-id="7a386-170">When a Razor Page or view is rendered, every line of Razor code emits HTML in text form.</span></span> <span data-ttu-id="7a386-171">Après le rendu, le serveur supprime l’instance de la page ou de la vue, y compris tout état produit.</span><span class="sxs-lookup"><span data-stu-id="7a386-171">After rendering, the server disposes of the page or view instance, including any state that was produced.</span></span> <span data-ttu-id="7a386-172">Lorsqu’une autre demande pour la page se produit, par exemple lorsque la validation du serveur échoue et que le résumé des validations s’affiche :</span><span class="sxs-lookup"><span data-stu-id="7a386-172">When another request for the page occurs, for instance when server validation fails and the validation summary is displayed:</span></span>

* <span data-ttu-id="7a386-173">La page entière est de nouveau restituée au texte HTML.</span><span class="sxs-lookup"><span data-stu-id="7a386-173">The entire page is rerendered to HTML text again.</span></span>
* <span data-ttu-id="7a386-174">La page est envoyée au client.</span><span class="sxs-lookup"><span data-stu-id="7a386-174">The page is sent to the client.</span></span>

<span data-ttu-id="7a386-175">Une Blazor application est composée d’éléments réutilisables de l’interface utilisateur appelée *composants*.</span><span class="sxs-lookup"><span data-stu-id="7a386-175">A Blazor app is composed of reusable elements of UI called *components*.</span></span> <span data-ttu-id="7a386-176">Un composant contient le code C#, le balisage et d’autres composants.</span><span class="sxs-lookup"><span data-stu-id="7a386-176">A component contains C# code, markup, and other components.</span></span> <span data-ttu-id="7a386-177">Lorsqu’un composant est rendu, Blazor produit un graphique des composants inclus similaires à un document Object Model XML ou XML (DOM).</span><span class="sxs-lookup"><span data-stu-id="7a386-177">When a component is rendered, Blazor produces a graph of the included components similar to an HTML or XML Document Object Model (DOM).</span></span> <span data-ttu-id="7a386-178">Ce graphique comprend l’état des composants contenus dans les propriétés et les champs.</span><span class="sxs-lookup"><span data-stu-id="7a386-178">This graph includes component state held in properties and fields.</span></span> <span data-ttu-id="7a386-179">Blazor évalue le graphique du composant pour produire une représentation binaire de la balise.</span><span class="sxs-lookup"><span data-stu-id="7a386-179">Blazor evaluates the component graph to produce a binary representation of the markup.</span></span> <span data-ttu-id="7a386-180">Le format binaire peut être :</span><span class="sxs-lookup"><span data-stu-id="7a386-180">The binary format can be:</span></span>

* <span data-ttu-id="7a386-181">Converti en texte HTML (lors du prérendu &dagger; ).</span><span class="sxs-lookup"><span data-stu-id="7a386-181">Turned into HTML text (during prerendering&dagger;).</span></span>
* <span data-ttu-id="7a386-182">Utilisé pour mettre à jour efficacement le balisage pendant le rendu normal.</span><span class="sxs-lookup"><span data-stu-id="7a386-182">Used to efficiently update the markup during regular rendering.</span></span>

<span data-ttu-id="7a386-183">&dagger;*Prérendu*: le composant demandé Razor est compilé sur le serveur en HTML statique et envoyé au client, où il est rendu à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7a386-183">&dagger;*Prerendering*: The requested Razor component is compiled on the server into static HTML and sent to the client, where it's rendered to the user.</span></span> <span data-ttu-id="7a386-184">Une fois la connexion établie entre le client et le serveur, les éléments statiques prérendus du composant sont remplacés par des éléments interactifs.</span><span class="sxs-lookup"><span data-stu-id="7a386-184">After the connection is made between the client and the server, the component's static prerendered elements are replaced with interactive elements.</span></span> <span data-ttu-id="7a386-185">Le prérendu rend l’application plus réactive pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7a386-185">Prerendering makes the app feel more responsive to the user.</span></span>

<span data-ttu-id="7a386-186">Une mise à jour de l’interface utilisateur dans Blazor est déclenchée par :</span><span class="sxs-lookup"><span data-stu-id="7a386-186">A UI update in Blazor is triggered by:</span></span>

* <span data-ttu-id="7a386-187">Intervention de l’utilisateur, telle que la sélection d’un bouton.</span><span class="sxs-lookup"><span data-stu-id="7a386-187">User interaction, such as selecting a button.</span></span>
* <span data-ttu-id="7a386-188">Déclencheurs d’application, tels qu’un minuteur.</span><span class="sxs-lookup"><span data-stu-id="7a386-188">App triggers, such as a timer.</span></span>

<span data-ttu-id="7a386-189">Le graphique du composant est rerendu et une *diff* . d’interface utilisateur (différence) est calculée.</span><span class="sxs-lookup"><span data-stu-id="7a386-189">The component graph is rerendered, and a UI *diff* (difference) is calculated.</span></span> <span data-ttu-id="7a386-190">Cette différence est le plus petit ensemble de modifications DOM requis pour mettre à jour l’interface utilisateur sur le client.</span><span class="sxs-lookup"><span data-stu-id="7a386-190">This diff is the smallest set of DOM edits required to update the UI on the client.</span></span> <span data-ttu-id="7a386-191">Le diff est envoyé au client dans un format binaire et appliqué par le navigateur.</span><span class="sxs-lookup"><span data-stu-id="7a386-191">The diff is sent to the client in a binary format and applied by the browser.</span></span>

<span data-ttu-id="7a386-192">Un composant est supprimé une fois que l’utilisateur l’a quittée sur le client.</span><span class="sxs-lookup"><span data-stu-id="7a386-192">A component is disposed after the user navigates away from it on the client.</span></span> <span data-ttu-id="7a386-193">Lorsqu’un utilisateur interagit avec un composant, l’état du composant (services, ressources) doit être conservé dans la mémoire du serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-193">While a user is interacting with a component, the component's state (services, resources) must be held in the server's memory.</span></span> <span data-ttu-id="7a386-194">Étant donné que l’état de nombreux composants peut être géré simultanément par le serveur, l’épuisement de la mémoire est un problème qui doit être résolu.</span><span class="sxs-lookup"><span data-stu-id="7a386-194">Because the state of many components might be maintained by the server concurrently, memory exhaustion is a concern that must be addressed.</span></span> <span data-ttu-id="7a386-195">Pour obtenir des conseils sur la façon de créer une Blazor Server application pour garantir la meilleure utilisation de la mémoire du serveur, consultez <xref:blazor/security/server/threat-mitigation> .</span><span class="sxs-lookup"><span data-stu-id="7a386-195">For guidance on how to author a Blazor Server app to ensure the best use of server memory, see <xref:blazor/security/server/threat-mitigation>.</span></span>

### <a name="circuits"></a><span data-ttu-id="7a386-196">Circuits</span><span class="sxs-lookup"><span data-stu-id="7a386-196">Circuits</span></span>

<span data-ttu-id="7a386-197">Une Blazor Server application est générée par-dessus [ASP.net Core SignalR ](xref:signalr/introduction).</span><span class="sxs-lookup"><span data-stu-id="7a386-197">A Blazor Server app is built on top of [ASP.NET Core SignalR](xref:signalr/introduction).</span></span> <span data-ttu-id="7a386-198">Chaque client communique avec le serveur sur une ou plusieurs SignalR connexions appelées *circuit*.</span><span class="sxs-lookup"><span data-stu-id="7a386-198">Each client communicates to the server over one or more SignalR connections called a *circuit*.</span></span> <span data-ttu-id="7a386-199">Un circuit est une Blazor abstraction sur les SignalR connexions qui peuvent tolérer des interruptions réseau temporaires.</span><span class="sxs-lookup"><span data-stu-id="7a386-199">A circuit is Blazor's abstraction over SignalR connections that can tolerate temporary network interruptions.</span></span> <span data-ttu-id="7a386-200">Lorsqu’un Blazor client constate que la SignalR connexion est déconnectée, il tente de se reconnecter au serveur à l’aide d’une nouvelle SignalR connexion.</span><span class="sxs-lookup"><span data-stu-id="7a386-200">When a Blazor client sees that the SignalR connection is disconnected, it attempts to reconnect to the server using a new SignalR connection.</span></span>

<span data-ttu-id="7a386-201">Chaque écran de navigateur (onglet de navigateur ou IFRAME) qui est connecté à une Blazor Server application utilise une SignalR connexion.</span><span class="sxs-lookup"><span data-stu-id="7a386-201">Each browser screen (browser tab or iframe) that is connected to a Blazor Server app uses a SignalR connection.</span></span> <span data-ttu-id="7a386-202">Il s’agit encore d’une autre distinction importante par rapport aux applications classiques affichées par le serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-202">This is yet another important distinction compared to typical server-rendered apps.</span></span> <span data-ttu-id="7a386-203">Dans une application affichée sur un serveur, l’ouverture de la même application dans plusieurs écrans de navigateur n’est généralement pas convertie en demandes de ressources supplémentaires sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-203">In a server-rendered app, opening the same app in multiple browser screens typically doesn't translate into additional resource demands on the server.</span></span> <span data-ttu-id="7a386-204">Dans une Blazor Server application, chaque écran de navigateur requiert un circuit distinct et des instances distinctes de l’état du composant à gérer par le serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-204">In a Blazor Server app, each browser screen requires a separate circuit and separate instances of component state to be managed by the server.</span></span>

<span data-ttu-id="7a386-205">Blazor tient compte de la fermeture d’un onglet de navigateur ou de la navigation vers une URL externe un arrêt *normal* .</span><span class="sxs-lookup"><span data-stu-id="7a386-205">Blazor considers closing a browser tab or navigating to an external URL a *graceful* termination.</span></span> <span data-ttu-id="7a386-206">En cas de résiliation appropriée, le circuit et les ressources associées sont immédiatement libérés.</span><span class="sxs-lookup"><span data-stu-id="7a386-206">In the event of a graceful termination, the circuit and associated resources are immediately released.</span></span> <span data-ttu-id="7a386-207">Un client peut également se déconnecter de manière non appropriée, par exemple en raison d’une interruption du réseau.</span><span class="sxs-lookup"><span data-stu-id="7a386-207">A client may also disconnect non-gracefully, for instance due to a network interruption.</span></span> <span data-ttu-id="7a386-208">Blazor Server stocke les circuits déconnectés pour un intervalle configurable afin de permettre au client de se reconnecter.</span><span class="sxs-lookup"><span data-stu-id="7a386-208">Blazor Server stores disconnected circuits for a configurable interval to allow the client to reconnect.</span></span>

<span data-ttu-id="7a386-209">Blazor Server permet au code de définir un *Gestionnaire de circuit* qui permet d’exécuter du code sur les modifications de l’état du circuit d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7a386-209">Blazor Server allows code to define a *circuit handler*, which allows running code on changes to the state of a user's circuit.</span></span> <span data-ttu-id="7a386-210">Pour plus d’informations, consultez <xref:blazor/advanced-scenarios#blazor-server-circuit-handler>.</span><span class="sxs-lookup"><span data-stu-id="7a386-210">For more information, see <xref:blazor/advanced-scenarios#blazor-server-circuit-handler>.</span></span>

### <a name="ui-latency"></a><span data-ttu-id="7a386-211">Latence de l’interface utilisateur</span><span class="sxs-lookup"><span data-stu-id="7a386-211">UI Latency</span></span>

<span data-ttu-id="7a386-212">La latence de l’interface utilisateur est le temps qu’il faut après une action initiée jusqu’au moment où l’interface utilisateur est mise à jour.</span><span class="sxs-lookup"><span data-stu-id="7a386-212">UI latency is the time it takes from an initiated action to the time the UI is updated.</span></span> <span data-ttu-id="7a386-213">Des valeurs plus petites pour la latence de l’interface utilisateur sont impératives pour qu’une application soit réactive à un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7a386-213">Smaller values for UI latency are imperative for an app to feel responsive to a user.</span></span> <span data-ttu-id="7a386-214">Dans une Blazor Server application, chaque action est envoyée au serveur, traitée et une comparaison d’interface utilisateur est renvoyée.</span><span class="sxs-lookup"><span data-stu-id="7a386-214">In a Blazor Server app, each action is sent to the server, processed, and a UI diff is sent back.</span></span> <span data-ttu-id="7a386-215">Par conséquent, la latence de l’interface utilisateur est la somme de la latence du réseau et de la latence du serveur lors du traitement de l’action.</span><span class="sxs-lookup"><span data-stu-id="7a386-215">Consequently, UI latency is the sum of network latency and the server latency in processing the action.</span></span>

<span data-ttu-id="7a386-216">Pour une application d’entreprise qui est limitée à un réseau d’entreprise privé, l’effet sur les perceptions de l’utilisateur de la latence en raison de la latence du réseau est généralement inperceptible.</span><span class="sxs-lookup"><span data-stu-id="7a386-216">For a business app that's limited to a private corporate network, the effect on user perceptions of latency due to network latency are usually imperceptible.</span></span> <span data-ttu-id="7a386-217">Pour une application déployée sur Internet, la latence peut devenir perceptible pour les utilisateurs, en particulier si les utilisateurs sont largement répartis géographiquement.</span><span class="sxs-lookup"><span data-stu-id="7a386-217">For an app deployed over the Internet, latency may become noticeable to users, particularly if users are widely distributed geographically.</span></span>

<span data-ttu-id="7a386-218">L’utilisation de la mémoire peut également contribuer à la latence de l’application.</span><span class="sxs-lookup"><span data-stu-id="7a386-218">Memory usage can also contribute to app latency.</span></span> <span data-ttu-id="7a386-219">L’augmentation de l’utilisation de la mémoire permet de garbage collection fréquentes ou la pagination de la mémoire sur le disque, qui dégradent les performances des applications et augmentent la latence de l’interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7a386-219">Increased memory usage results in frequent garbage collection or paging memory to disk, both of which degrade app performance and consequently increase UI latency.</span></span>

<span data-ttu-id="7a386-220">Blazor Server les applications doivent être optimisées pour réduire la latence de l’interface utilisateur en réduisant la latence du réseau et l’utilisation de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="7a386-220">Blazor Server apps should be optimized to minimize UI latency by reducing network latency and memory usage.</span></span> <span data-ttu-id="7a386-221">Pour une approche de la mesure de la latence du réseau, consultez <xref:blazor/host-and-deploy/server#measure-network-latency> .</span><span class="sxs-lookup"><span data-stu-id="7a386-221">For an approach to measuring network latency, see <xref:blazor/host-and-deploy/server#measure-network-latency>.</span></span> <span data-ttu-id="7a386-222">Pour plus d’informations sur SignalR et Blazor , consultez :</span><span class="sxs-lookup"><span data-stu-id="7a386-222">For more information on SignalR and Blazor, see:</span></span>

* <xref:blazor/host-and-deploy/server>
* <xref:blazor/security/server/threat-mitigation>

### <a name="connection-to-the-server"></a><span data-ttu-id="7a386-223">Connexion au serveur</span><span class="sxs-lookup"><span data-stu-id="7a386-223">Connection to the server</span></span>

<span data-ttu-id="7a386-224">Blazor Server les applications requièrent une SignalR connexion active au serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-224">Blazor Server apps require an active SignalR connection to the server.</span></span> <span data-ttu-id="7a386-225">Si la connexion est perdue, l’application tente de se reconnecter au serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-225">If the connection is lost, the app attempts to reconnect to the server.</span></span> <span data-ttu-id="7a386-226">Tant que l’état du client reste dans la mémoire du serveur, la session client reprend sans perte d’État.</span><span class="sxs-lookup"><span data-stu-id="7a386-226">As long as the client's state remains in the server's memory, the client session resumes without losing state.</span></span>

<span data-ttu-id="7a386-227">Une Blazor Server application effectue un prérendu en réponse à la première demande du client, ce qui crée l’état de l’interface utilisateur sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-227">A Blazor Server app prerenders in response to the first client request, which creates the UI state on the server.</span></span> <span data-ttu-id="7a386-228">Lorsque le client tente de créer une SignalR connexion, le client doit se reconnecter au même serveur.</span><span class="sxs-lookup"><span data-stu-id="7a386-228">When the client attempts to create a SignalR connection, the client must reconnect to the same server.</span></span> <span data-ttu-id="7a386-229">Blazor Server les applications qui utilisent plusieurs serveurs principaux doivent implémenter des *sessions rémanentes* pour les SignalR connexions.</span><span class="sxs-lookup"><span data-stu-id="7a386-229">Blazor Server apps that use more than one backend server should implement *sticky sessions* for SignalR connections.</span></span>

<span data-ttu-id="7a386-230">Nous vous recommandons d’utiliser le [ SignalR service Azure](/azure/azure-signalr) pour les Blazor Server applications.</span><span class="sxs-lookup"><span data-stu-id="7a386-230">We recommend using the [Azure SignalR Service](/azure/azure-signalr) for Blazor Server apps.</span></span> <span data-ttu-id="7a386-231">Le service permet la mise à l’échelle d’une Blazor Server application vers un grand nombre de connexions simultanées SignalR .</span><span class="sxs-lookup"><span data-stu-id="7a386-231">The service allows for scaling up a Blazor Server app to a large number of concurrent SignalR connections.</span></span> <span data-ttu-id="7a386-232">Les sessions rémanentes sont activées pour le SignalR service Azure en définissant l' `ServerStickyMode` option ou la valeur de configuration du service sur `Required` .</span><span class="sxs-lookup"><span data-stu-id="7a386-232">Sticky sessions are enabled for the Azure SignalR Service by setting the service's `ServerStickyMode` option or configuration value to `Required`.</span></span> <span data-ttu-id="7a386-233">Pour plus d’informations, consultez <xref:blazor/host-and-deploy/server#signalr-configuration>.</span><span class="sxs-lookup"><span data-stu-id="7a386-233">For more information, see <xref:blazor/host-and-deploy/server#signalr-configuration>.</span></span>

<span data-ttu-id="7a386-234">Lorsque vous utilisez IIS, les sessions rémanentes sont activées avec *application Request Routing*.</span><span class="sxs-lookup"><span data-stu-id="7a386-234">When using IIS, sticky sessions are enabled with *Application Request Routing*.</span></span> <span data-ttu-id="7a386-235">Pour plus d’informations, consultez [équilibrage de charge http à l’aide de application Request Routing](/iis/extensions/configuring-application-request-routing-arr/http-load-balancing-using-application-request-routing).</span><span class="sxs-lookup"><span data-stu-id="7a386-235">For more information, see [HTTP Load Balancing using Application Request Routing](/iis/extensions/configuring-application-request-routing-arr/http-load-balancing-using-application-request-routing).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7a386-236">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="7a386-236">Additional resources</span></span>

* <xref:blazor/tooling>
* <xref:signalr/introduction>
* <xref:blazor/fundamentals/signalr>
* <xref:tutorials/signalr-blazor>
