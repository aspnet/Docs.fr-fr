# <a name="aspnet-core-health-check-sample"></a><span data-ttu-id="abef4-101">Exemple de contrôle d’intégrité ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="abef4-101">ASP.NET Core Health Check Sample</span></span>

<span data-ttu-id="abef4-102">Cet exemple illustre l’utilisation de Health Check Middleware et services.</span><span class="sxs-lookup"><span data-stu-id="abef4-102">This sample illustrates the use of Health Check Middleware and services.</span></span> <span data-ttu-id="abef4-103">Cet exemple utilise le scénario décrit dans la rubrique [Contrôles d’intégrité dans ASP.NET Core](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks).</span><span class="sxs-lookup"><span data-stu-id="abef4-103">This sample demonstrates the scenario described in the [Health checks in ASP.NET Core](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks) topic.</span></span>

<span data-ttu-id="abef4-104">Pour exécuter l’exemple d’application selon un scénario décrit dans la rubrique, utilisez la commande [dotnet run](https://docs.microsoft.com/dotnet/core/tools/dotnet-run) dans un interpréteur de commandes, à partir du dossier du projet.</span><span class="sxs-lookup"><span data-stu-id="abef4-104">To run the sample app for a scenario described in the topic, use the [dotnet run](https://docs.microsoft.com/dotnet/core/tools/dotnet-run) command from the project's folder in a command shell.</span></span> <span data-ttu-id="abef4-105">Passez un commutateur pour le scénario que vous explorez.</span><span class="sxs-lookup"><span data-stu-id="abef4-105">Pass a switch for the scenario that you're exploring.</span></span> <span data-ttu-id="abef4-106">Par défaut, la configuration de l’application est `basic` lorsqu’aucun commutateur n’est fourni à `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="abef4-106">The app defaults to the `basic` configuration when a switch isn't provided to `dotnet run`.</span></span>

| <span data-ttu-id="abef4-107">Scénario</span><span class="sxs-lookup"><span data-stu-id="abef4-107">Scenario</span></span>                                               | <span data-ttu-id="abef4-108">Commande de l’exemple d’application</span><span class="sxs-lookup"><span data-stu-id="abef4-108">Sample app command</span></span>               | <span data-ttu-id="abef4-109">Description</span><span class="sxs-lookup"><span data-stu-id="abef4-109">Description</span></span> |
| ------------------------------------------------------ | -------------------------------- | ----------- |
| <span data-ttu-id="abef4-110">Sonde d’intégrité de base (par défaut)</span><span class="sxs-lookup"><span data-stu-id="abef4-110">Basic health probe (default)</span></span>                           | `dotnet run --scenario basic`    | <span data-ttu-id="abef4-111">Vérifie que l’application peut traiter les requêtes HTTP.</span><span class="sxs-lookup"><span data-stu-id="abef4-111">Confirms that the app can process HTTP requests.</span></span> |
| <span data-ttu-id="abef4-112">Sondage de base de données</span><span class="sxs-lookup"><span data-stu-id="abef4-112">Database probe</span></span>                                         | `dotnet run --scenario db`       | <span data-ttu-id="abef4-113">Vérifie la connexion de base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="abef4-113">Checks a SQL Server database connection.</span></span> <span data-ttu-id="abef4-114">Pour obtenir des instructions, consultez la section [Sonde de base de données](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#database-probe) de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="abef4-114">See the [Database probe](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#database-probe) section of the topic for instructions.</span></span> |
| <span data-ttu-id="abef4-115">Sondes probe readiness et probe liveness</span><span class="sxs-lookup"><span data-stu-id="abef4-115">Readiness/liveness probes</span></span>                              | `dotnet run --scenario liveness` | <span data-ttu-id="abef4-116">Vérifie si une application est en production (*liveness*) ou en préparation à la production (*readiness*).</span><span class="sxs-lookup"><span data-stu-id="abef4-116">Performs checks for a live app status (*liveness*) versus the app preparing to become live (*readiness*).</span></span> |
| <span data-ttu-id="abef4-117">Sonde basée sur les métriques (mémoire)/</span><span class="sxs-lookup"><span data-stu-id="abef4-117">Metric-based probe (memory)/</span></span><br><span data-ttu-id="abef4-118">enregistreur de réponses personnalisé</span><span class="sxs-lookup"><span data-stu-id="abef4-118">custom response writer</span></span> | `dotnet run --scenario writer`   | <span data-ttu-id="abef4-119">Vérifie l’utilisation de la mémoire et écrit du code JSON personnalisé lorsque le point de terminaison d’intégrité est vérifié.</span><span class="sxs-lookup"><span data-stu-id="abef4-119">Checks against memory use and writes out custom JSON when the health endpoint is checked.</span></span> |
| <span data-ttu-id="abef4-120">Filtrer par port</span><span class="sxs-lookup"><span data-stu-id="abef4-120">Filter by port</span></span>                                         | `dotnet run --scenario port`     | <span data-ttu-id="abef4-121">Filtre les contrôles d’intégrité selon un port donné.</span><span class="sxs-lookup"><span data-stu-id="abef4-121">Filters health checks to a given port.</span></span> <span data-ttu-id="abef4-122">Pour obtenir des instructions, consultez la section [Filtrer par port](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#filter-by-port) de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="abef4-122">See the [Filter by port](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#filter-by-port) section of the topic for instructions.</span></span> |

<span data-ttu-id="abef4-123">Les scénarios qui impliquent des sondes de base de données et des filtres de port nécessitent une configuration supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="abef4-123">The database probe and port filter scenarios require additional configuration.</span></span> <span data-ttu-id="abef4-124">Pour plus d’informations, consultez la rubrique [Contrôles d’intégrité](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks).</span><span class="sxs-lookup"><span data-stu-id="abef4-124">See the [Health checks](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks) topic for details.</span></span>
